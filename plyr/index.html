<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BGM: Beautiful in White (Instrumental)</title>
  <style>
    html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: visible;
  box-sizing: border-box;
}

.player {
  width: clamp(70%, 80vw, 90%);
  aspect-ratio: 4.5;
  position: absolute;
  bottom: 5%;
  right: 3%;
  padding: 2%;
  
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: flex-end;
  background: rgba(30, 30, 30, 0.85);
  overflow: visible;
}

@media (max-width: 768px) {
  .player {
    border-radius: 20px;
  }
}
@media (min-width: 768px) {
  .player {
    border-radius: 40px;
  }
}


button {
  flex: 1 1 25%;
  position: relative;
  aspect-ratio: 0.25;
  max-width: 30%;
  width: 25%;
  height: 100%;
  border: none;
  background: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

button::before {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  background-size: contain;
  background-repeat: no-repeat;
  transition: opacity 0.3s ease;
}

button:hover::before {
  opacity: 0.75;
}

.volume-container {
  flex: 1 1 25%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 25%;
  max-width: 30%;
  height: 100%;
  aspect-ratio: 0.25 / 1;
}

.volume-slider {
  position: absolute;
  bottom: 150%;
  left: 40%;
  transform: translateX(-50%);
  width: 30%; 
  aspect-ratio: 1 / 9;
  background: rgba(30, 30, 30, 0.85);
  border-radius: 12px;
  cursor: pointer;
  user-select: none;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 100;
}

.volume-slider.active {
  opacity: 1;
  pointer-events: auto;
}

.volume-level {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  border-radius: 12px 12px 0 0;
  height: 0%;
  transition: height 0.15s ease;
  pointer-events: none;
  background: lightgrey;
}

.thumb {
  position: absolute;
  left: 50%;
  width: 110%;
  aspect-ratio: 1 / 1;
  background: white;
  border-radius: 50%;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
  cursor: grab;
  user-select: none;
  touch-action: none;
  transform: translate(-50%, 0);
  transition: top 0.15s ease;
  z-index: 10;
}

.thumb:active {
  cursor: grabbing;
}

#mute {
  position: relative !important;
  width: 100% !important;
  height: 100% !important;
  max-width: none !important;
  aspect-ratio: auto !important;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  top: auto !important;
  left: auto !important;
  transform: none !important;
}


    #playPause::before {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" fill="white"><path d="m12.233 7.68 15.75 10.124c.69.443.69 1.45 0 1.892L12.233 29.82a1.125 1.125 0 0 1-1.733-.947V8.627c0-.89.985-1.428 1.733-.947z"/></svg>');
    }

    #playPause.playing::before {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M10 3a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h4zm8 0a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h4z"/></svg>');
    }

    #mute::before {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 0 100 100" fill="white"><path d="M44.2,24.3L28.7,36.6l-0.3,0.3H11.9c-1.1,0-1.9,0.9-1.9,1.9v22.3c0,1.1,0.9,1.9,1.9,1.9h16.4l0.3,0.3l15.5,12.4c1.3,1,3.1,0.1,3.1-1.5V25.8C47.3,24.2,45.5,23.3,44.2,24.3z"/></svg>');
    }

    #mute.low::before {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 0 100 100" fill="white"><path d="M44.2,24.3L28.7,36.6l-0.3,0.3H11.9c-1.1,0-1.9,0.9-1.9,1.9v22.3c0,1.1,0.9,1.9,1.9,1.9h16.4l0.3,0.3l15.5,12.4c1.3,1,3.1,0.1,3.1-1.5V25.8C47.3,24.2,45.5,23.3,44.2,24.3z"/><path d="M57.1,60.7c-1.2,0-2.3-0.6-2.9-1.7c-0.9-1.6-0.4-3.7,1.2-4.6C57,53.5,58,51.8,58,50s-1-3.5-2.6-4.4c-1.6-0.9-2.2-3-1.2-4.6c0.9-1.6,3-2.2,4.6-1.2c3.6,2.1,5.9,6,5.9,10.2s-2.3,8.1-5.9,10.2C58.2,60.5,57.7,60.7,57.1,60.7z"/></svg>');
    }

    #mute.high::before {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 0 100 100" fill="white"><path d="M44.2,24.3L28.7,36.6l-0.3,0.3H11.9c-1.1,0-1.9,0.9-1.9,1.9v22.3c0,1.1,0.9,1.9,1.9,1.9h16.4l0.3,0.3l15.5,12.4c1.3,1,3.1,0.1,3.1-1.5V25.8C47.3,24.2,45.5,23.3,44.2,24.3z"/><path d="M57.1,60.7c-1.2,0-2.3-0.6-2.9-1.7c-0.9-1.6-0.4-3.7,1.2-4.6C57,53.5,58,51.8,58,50s-1-3.5-2.6-4.4c-1.6-0.9-2.2-3-1.2-4.6c0.9-1.6,3-2.2,4.6-1.2c3.6,2.1,5.9,6,5.9,10.2s-2.3,8.1-5.9,10.2C58.2,60.5,57.7,60.7,57.1,60.7z"/><path d="M63.4,71.6c-1.2,0-2.3-0.6-2.9-1.7c-0.9-1.6-0.4-3.7,1.2-4.6c5.5-3.2,8.9-9.1,8.9-15.4s-3.4-12.2-8.9-15.4c-1.6-0.9-2.2-3-1.2-4.6c0.9-1.6,3-2.2,4.6-1.2c7.5,4.4,12.2,12.5,12.2,21.2s-4.7,16.8-12.2,21.2C64.6,71.5,64,71.6,63.4,71.6z"/></svg>');
    }

    #mute.muted::before {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 0 100 100" fill="white"><path d="M44.2,24.3L28.7,36.6l-0.3,0.3H11.9c-1.1,0-1.9,0.9-1.9,1.9v22.3c0,1.1,0.9,1.9,1.9,1.9h16.4l0.3,0.3l15.5,12.4 c1.3,1,3.1,0.1,3.1-1.5V25.8C47.3,24.2,45.5,23.3,44.2,24.3"/><polygon points="85,40 80,35 70,45 60,35 55,40 65,50 55,60 60,65 70,55 80,65 85,60 75,50"/></svg>');
    }

    #close::before {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-5 -5 20 20" fill="white"><path d="m6.414 5 3.293 3.293a1 1 0 0 1-1.414 1.414L5 6.414 1.707 9.707A1 1 0 1 1 .293 8.293L3.586 5 .293 1.707A1 1 0 0 1 1.707.293L5 3.586 8.293.293a1 1 0 0 1 1.414 1.414L6.414 5z"/></svg>');
    }
  
  </style>
</head>
<body> 
  <div class="player" id="player">
    <button id="playPause" aria-label="Play/Pause" class=""></button>
    <div class="volume-container" id="volumeContainer">
      <button id="mute" aria-label="Mute/Unmute" class="low"></button>
      <div class="volume-slider" role="slider" aria-valuemin="0" aria-valuemax="1" aria-valuenow="0.50" tabindex="0" aria-label="Volume control">
        <div class="volume-level" style="height: 50%;"></div>
        <div class="thumb" tabindex="0" style="top: 35.5px;"></div>
      </div>
    </div>
    <button id="close" aria-label="Close player"></button>
    <audio id="audio" src="Menamakanmu Cinta.mp3?" autoplay loop preload="auto"></audio>
  </div>
 <script>
  const audio = document.getElementById('audio');

  audio.addEventListener('loadedmetadata', () => {
    audio.currentTime = 71; // jump to 71 seconds
  });

  const playPauseBtn = document.getElementById('playPause');
  const muteBtn = document.getElementById('mute');
  const closeBtn = document.getElementById('close');
  const volumeContainer = document.getElementById('volumeContainer');
  const volumeSlider = volumeContainer.querySelector('.volume-slider');
  const volumeLevel = volumeSlider.querySelector('.volume-level');
  const thumb = volumeSlider.querySelector('.thumb');

  let dragging = false;
  let volume = 0.35;
  let fadeInIntervalId = null;

  audio.volume = 0; // start from 0 for fade-in
  audio.muted = false;

  // --- Fade In Function ---
  function fadeInAudio(audioElement, targetVolume = 0.4, duration = 1500) {
    if (fadeInIntervalId) {
      clearInterval(fadeInIntervalId);
    }

    const step = 0.01;
    const intervalTime = (duration * step) / targetVolume;

    audioElement.volume = 0;
    audioElement.muted = false;

    fadeInIntervalId = setInterval(() => {
      if (audioElement.volume < targetVolume) {
        audioElement.volume = Math.min(audioElement.volume + step, targetVolume);
      } else {
        clearInterval(fadeInIntervalId);
        fadeInIntervalId = null;
      }
    }, intervalTime);
  }

  function updateMuteIcon() {
    muteBtn.classList.remove('muted', 'low', 'high');
    if (audio.muted || volume === 0) {
      muteBtn.classList.add('muted');
    } else if (volume < 0.5) {
      muteBtn.classList.add('low');
    } else {
      muteBtn.classList.add('high');
    }
  }

  function updateUI() {
    const heightPercent = volume * 100;
    volumeLevel.style.height = heightPercent + '%';

    const sliderHeight = volumeSlider.clientHeight;
    const thumbHeight = thumb.clientHeight;
    const top = sliderHeight - (heightPercent / 100) * sliderHeight - thumbHeight / 2;
    thumb.style.top = top + 'px';

    volumeSlider.setAttribute('aria-valuenow', volume.toFixed(2));
    updateMuteIcon();
  }

  function setVolumeFromPosition(clientY) {
    const rect = volumeSlider.getBoundingClientRect();
    let relativeY = rect.bottom - clientY;
    relativeY = Math.min(Math.max(relativeY, 0), rect.height);
    volume = relativeY / rect.height;
    volume = Math.min(Math.max(volume, 0), 1);
    audio.volume = volume;
    audio.muted = volume === 0;
    updateUI();
  }

  function showSlider() {
    volumeSlider.classList.add('active');
    document.addEventListener('click', onClickOutside);
  }

  function hideSlider() {
    volumeSlider.classList.remove('active');
    document.removeEventListener('click', onClickOutside);
  }

  function onClickOutside(event) {
    if (!volumeContainer.contains(event.target)) {
      hideSlider();
    }
  }

  playPauseBtn.addEventListener('click', () => {
    if (audio.paused) {
      audio.play().then(() => {
        fadeInAudio(audio, volume, 1500); // Fade in to set volume
      }).catch(() => {});
      playPauseBtn.classList.add('playing');
    } else {
      audio.pause();
      playPauseBtn.classList.remove('playing');
    }
  });

  muteBtn.addEventListener('click', () => {
    audio.muted = !audio.muted;
    updateUI();
  });

  volumeContainer.addEventListener('mouseenter', () => {
    showSlider();
  });

  // --- Desktop dragging ---
  thumb.addEventListener('mousedown', (e) => {
    e.preventDefault();
    dragging = true;
    document.body.style.userSelect = 'none';
  });

  window.addEventListener('mouseup', () => {
    if (dragging) {
      dragging = false;
      document.body.style.userSelect = '';
    }
  });

  window.addEventListener('mousemove', (e) => {
    if (dragging) {
      setVolumeFromPosition(e.clientY);
    }
  });

  // --- Mobile dragging ---
  thumb.addEventListener('touchstart', (e) => {
    e.preventDefault();
    dragging = true;
    document.body.style.userSelect = 'none';
  }, { passive: false });

  window.addEventListener('touchend', () => {
    if (dragging) {
      dragging = false;
      document.body.style.userSelect = '';
    }
  });

  window.addEventListener('touchmove', (e) => {
    if (dragging && e.touches.length) {
      setVolumeFromPosition(e.touches[0].clientY);
    }
  }, { passive: false });

  // Clicking on slider track (desktop + mobile)
  volumeSlider.addEventListener('click', (e) => {
    if (e.target !== thumb) {
      setVolumeFromPosition(e.clientY);
    }
  });

  volumeSlider.addEventListener('touchstart', (e) => {
    if (e.target !== thumb && e.touches.length) {
      setVolumeFromPosition(e.touches[0].clientY);
    }
  }, { passive: false });

  // Keyboard control
  volumeSlider.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowUp' || e.key === 'ArrowRight') {
      volume = Math.min(volume + 0.05, 1);
      audio.volume = volume;
      audio.muted = false;
      updateUI();
      e.preventDefault();
    } else if (e.key === 'ArrowDown' || e.key === 'ArrowLeft') {
      volume = Math.max(volume - 0.05, 0);
      audio.volume = volume;
      audio.muted = volume === 0;
      updateUI();
      e.preventDefault();
    } else if (e.key === 'Home') {
      volume = 0;
      audio.volume = volume;
      audio.muted = true;
      updateUI();
      e.preventDefault();
    } else if (e.key === 'End') {
      volume = 1;
      audio.volume = volume;
      audio.muted = false;
      updateUI();
      e.preventDefault();
    }
  });

  updateUI();

  closeBtn.addEventListener('click', () => {
    audio.pause();
    document.getElementById('player').style.display = 'none';
  });

  document.addEventListener("visibilitychange", () => {
    if (document.hidden) {
      audio.pause();
      playPauseBtn.classList.remove('playing');
    }
  });
	 window.addEventListener("message", (event) => {
  if (event.data && event.data.action === "playAudio") {
    if (audio.paused) {
      audio.play().then(() => {
        fadeInAudio(audio, volume, 1500);
        playPauseBtn.classList.add('playing');
      }).catch(err => {
        console.warn("Autoplay failed:", err);
      });
    }
  }
});
</script>

</body></html>
